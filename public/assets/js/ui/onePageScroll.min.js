(function(){"use strict";var t;t=function(t){var e;return e=function(t){return""!==t&&!isNaN(t)&&Math.round(t)===t},t.fn.stripClass=function(t,e){var i;return i=new RegExp((e?"\\S+":"\\b")+t+"\\S*","g"),this.attr("class",function(t,e){return e?e.replace(i,""):void 0}),this},t.onepage_scroll=function(i,n){var s,o;return this.settings={},this.$element=t(i),this.state="",this.eventState="",this.quietPeriod=500,o=function(){var t,e;return t=document.body||document.documentElement,e=t.style,void 0!==e.transitions||void 0!==e.WebkitTransition},s=function(){var t,e,i,n,s,o,a,r;if(e="Webkit Moz O ms".split(" "),i="transform",s=document.body||document.documentElement,o=s.style,n=void 0!==o[i],!n)for(i=i.charAt(0).toUpperCase()+i.slice(1),a=0,r=e.length;r>a;a++)if(t=e[a],void 0!==o[t+i])return!0;return n},this.transformPage=function(e,i){var n,s,o=this;return i="function"!=typeof i?t.noop:i,n=100*(e-1)*-1,this.supportTransition&&this.supportTransform?(this.$element.css({"-ms-transform":"translate(0, "+n+"%)","-ms-transition":"all "+this.settings.animationTime+"ms "+this.settings.easing,"-webkit-transform":"translate(0, "+n+"%)","-webkit-transition":"all "+this.settings.animationTime+"ms "+this.settings.easing,transform:"translate(0, "+n+"%)",transition:"all "+this.settings.animationTime+"ms "+this.settings.easing}),s=this,this.$element.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){return t.target===this?(s.settings.afterMove(e),i(e)):void 0})):this.$element.animate({top:""+n+"%"},function(){return o.settings.afterMove(e),i(e)}),this},this.moveDown=function(){var e;return e=t(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(e+1)},this.moveUp=function(){var e;return e=t(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(e-1)},this.moveTo=function(i){var n,s,o,a,r,h=this;if(n=t(""+this.settings.sectionContainer+".active"),s=n.data("index"),!e(i)){if(r=this.$element.find(i),1!==r.length)return;if(i=r.data("index"),!e(i))return}if(i!==s){if(o=i,this.settings.smooth&&Math.abs(s-i)>1&&(o=i>s?s+1:s-1),1>o||o>this.total){if(!this.settings.loop)return;o=1>o?this.total:1}return a=t(""+this.settings.sectionContainer+"[data-index='"+o+"']"),this.settings.beforeMove(n.data("index")),n.removeClass("active"),a.addClass("active"),this.settings.pagination&&(t(".onepage-pagination li a.active").removeClass("active"),t(".onepage-pagination li a[data-index='"+o+"']").addClass("active")),t("body").removeClass("viewing-page-"+n.data("index")).addClass("viewing-page-"+a.data("index")),this.settings.updateURL&&this.updateHistory(o),this.settings.smooth&&i!==o?this.transformPage(o,function(){return h.moveTo(i)}):this.transformPage(o),this}},this.updateHistory=function(t){var e;return history.replaceState&&(e=window.location.href.substr(0,""+window.location.href.indexOf("#")+"#"+t),history.pushState({},document.title,e)),this},this.bindEvents=function(){return"binded"!==this.eventState&&"created"===this.state?(this.bindScrollEvents(),this.bindSwipeEvents(),this.settings.keyboard&&this.bindKeyEvents(),this.eventState="binded",this):void 0},this.unbindEvents=function(){return"binded"===this.eventState?(this.unbindScrollEvents(),this.unbindSwipeEvents(),this.settings.keyboard&&this.unbindKeyEvents(),this.eventState="unbinded",this):void 0},this.bindScrollEvents=function(){var e=this;return t(document).bind("mousewheel.onepage DOMMouseScroll.onepage",function(t){var i;return t.preventDefault(),i=t.originalEvent.wheelDelta||-t.originalEvent.detail,e.init_scroll(t,i)}),this},this.unbindScrollEvents=function(){return t(document).unbind("mousewheel.onepage DOMMouseScroll.onepage"),this},this.bindSwipeEvents=function(){var e,i=this;return e=this.$element.hammer(),this.$element.hammer().on("swipedown.onepage",function(t){return t.preventDefault(),t.gesture.preventDefault(),i.moveUp()}).on("swipeup.onepage",function(t){return t.preventDefault(),t.gesture.preventDefault(),i.moveDown()}),t(document).bind("touchmove.onepage",function(t){return t.preventDefault(),!1}),this},this.unbindSwipeEvents=function(){var e;return e=this.$element.hammer(),e.off("swipedown.onepage"),e.off("swipeup.onepage"),t(document).unbind("touchmove.onepage"),this},this.bindKeyEvents=function(){var e=this;return t(document).on("keydown.onepage",function(t){var i;if(i=t.target.nodeName,"INPUT"!==i&&"TEXTAREA"!==i){switch(t.which){case 33:case 38:e.moveUp();break;case 34:case 40:e.moveDown();break;case 36:e.moveTo(1);break;case 35:e.moveTo(e.total);break;default:return}return t.preventDefault()}}),this},this.unbindKeyEvents=function(){return t(document).off("keydown.onepage"),this},this.viewportTooSmall=function(){return this.settings.responsiveFallbackWidth!==!1&&t(window).width()<this.settings.responsiveFallbackWidth?!0:this.settings.responsiveFallbackHeight!==!1&&t(window).height()<this.settings.responsiveFallbackHeight?!0:!1},this.watchResponsive=function(){return this.viewportTooSmall()?"created"===this.state&&this.destroy():"created"!==this.state&&this.create(),this},this.init_scroll=function(t,e){var i,n;return i=e,n=(new Date).getTime(),n-this.lastAnimation<this.quietPeriod+this.settings.animationTime?void t.preventDefault():(0>i?this.moveDown():this.moveUp(),this.lastAnimation=n,this)},this.bindPagination=function(){var e=this;return t(".onepage-pagination").on("click.onepage","li a",function(i){var n;return n=t(i.currentTarget).data("index"),e.moveTo(n)}),this},this.createSections=function(){var e,i=this;return e=0,t.each(this.sections,function(n,s){return t(s).addClass("section").attr("data-index",n+1).css({position:"absolute",top:""+e+"%"}),e+=100,i.settings.pagination?i.paginationList+="<li><a data-index='"+(n+1)+"' href='#"+(n+1)+"'></a></li>":void 0}),this},this.destroySections=function(){return this.sections.removeClass("section active").removeAttr("data-index style"),this},this.destroy=function(){return"created"===this.state&&(this.settings.beforeDestroy(this),t("html, body").removeClass("onepage-scroll-enabled"),t("body").stripClass("viewing-page-"),this.$element.removeClass("onepage-wrapper").removeAttr("style"),this.destroySections(),this.settings.pagination&&(t("ul.onepage-pagination").off("click.onepage","li a"),t("ul.onepage-pagination").remove()),this.unbindEvents(),this.state="destroyed",this.settings.afterDestroy(this)),this},this.create=function(){var e,i;if("created"!==this.state){if(this.viewportTooSmall())return;this.settings.beforeCreate(this),this.sections=t(this.settings.sectionContainer),this.total=this.sections.length,this.lastAnimation=0,this.paginationList="",t("html, body").addClass("onepage-scroll-enabled"),this.$element.addClass("onepage-wrapper").css("position","relative"),this.createSections(),this.settings.pagination&&(t("<ul class='onepage-pagination'>"+this.paginationList+"</ul>").prependTo("body"),i=t(".onepage-pagination").height()/2*-1,t(".onepage-pagination").css("margin-top",i),this.bindPagination()),this.reset(),this.settings.updateURL&&""!==window.location.hash&&"#1"!==window.location.hash&&(e=window.location.hash.replace("#",""),this.moveTo(e)),this.state="created",this.bindEvents(),this.settings.afterCreate(this)}return this},this.reset=function(){return t(""+this.settings.sectionContainer+"[data-index='1']").addClass("active"),t("body").addClass("viewing-page-1"),this.settings.pagination&&t(".onepage-pagination li a[data-index='1']").addClass("active"),t(window).scrollTop(0)},this.init=function(){var e=this;return this.settings=t.extend({},this.defaults,n),this.supportTransition=o(),this.supportTransform=s(),(this.settings.responsiveFallbackWidth!==!1||this.settings.responsiveFallbackHeight!==!1)&&t(window).on("resize.onepage",function(){return e.watchResponsive()}),this.create(),this},this.init(),this},t.onepage_scroll.prototype.defaults={sectionContainer:"section",easing:"ease",animationTime:1e3,pagination:!0,keyboard:!1,updateURL:!1,beforeMove:t.noop,afterMove:t.noop,loop:!1,responsiveFallbackWidth:!1,responsiveFallbackHeight:!1,smooth:!1,beforeCreate:t.noop,afterCreate:t.noop,beforeDestroy:t.noop,afterDestroy:t.noop},t.fn.onepage_scroll=function(e){return this.each(function(){var i;return void 0===t(this).data("onepage_scroll")?(i=new t.onepage_scroll(this,e),t(this).data("onepage_scroll",i)):void 0}),1===this.length&&void 0!==t(this).data("onepage_scroll")?t(this).data("onepage_scroll"):void 0},t.fn.onepage_scroll},"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}).call(this);